<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manual | Bash Commands</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="./css/dark.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<style>
  body { background:#0f1115; color:#e6e8ef; }
    .navbar { background:#151823 !important; }
    .card { background:#141a29; border:1px solid #2a334b; border-radius:1rem;color:white }
    .form-control, .form-select, .btn { background:#1a2030; color:#e6e8ef; border-color:#2a334b; }
    .badge-cat { background:#24314f; }
    pre, code { background:#0b0e14; color:#e6e8ef; }
    .option-table td, .option-table th { border-color:#2a334b !important; color:white;}
    .copy-btn { border:1px solid #2a334b; }
    .muted { color:#98a2b6; }
    .search-hint { font-size:.9rem; color:#9aa4bf; }
  </style>  	
  
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand fw-semibold" href="manual.html">Manual</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navMain" class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="manual.html">curl</a></li>
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="bash.html">Bash</a></li>
<li class="nav-item"><a class="nav-link active" aria-current="page" href="nvim.html">Neovim</a></li>

          <li class="nav-item"><a class="nav-link disabled" aria-disabled="true" href="#">(เร็วๆ นี้) manuals อื่น</a></li>
        </ul>
        <span class="navbar-text muted">Bash Cheatsheet • คัดลอกได้ทันที</span>
      </div>
    </div>
  </nav>

  <div class="container my-4">
    <!-- Search & Filters -->
    <div class="row g-3 align-items-end">
      <div class="col-12 col-md-6">
        <label class="form-label">ค้นหาคำสั่ง / คำอธิบาย / flag</label>
        <input id="search" type="text" class="form-control" placeholder="พิมพ์เช่น: grep -r หรือ permission หรือ network">
        <div class="search-hint mt-1">กด <kbd>/</kbd> เพื่อโฟกัสช่องค้นหา • พิมพ์ต่อเนื่องได้หลายคำ (AND)</div>
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">หมวดหมู่</label>
        <select id="category" class="form-select">
          <option value="all">ทั้งหมด</option>
          <option>ไฟล์และไดเรกทอรี</option>
          <option>ค้นหาและจัดการข้อความ</option>
          <option>บีบอัด/แตกไฟล์</option>
          <option>เน็ตเวิร์ก</option>
          <option>ระบบและแพ็กเกจ</option>
          <option>กระบวนการ/โปรเซส</option>
          <option>เชลล์ & สคริปต์</option>
        </select>
      </div>
      <div class="col-12 col-md-2 d-grid">
        <button id="btnReset" class="btn btn-secondary">รีเซ็ต</button>
      </div>
    </div>

    <hr class="border-secondary my-4"/>

    <!-- Commands list -->
    <div id="cmdList" class="row g-3"></div>

    <!-- Footer note -->
    <div class="mt-4 muted">
      หมายเหตุ: รายการนี้เป็น “ชุดยอดนิยมที่ใช้บ่อย” ไม่ใช่ทุกคำสั่งในโลก Bash — สามารถขยายเพิ่มได้ง่าย ๆ ในตัวแปร <code>COMMANDS</code> ด้านล่าง
    </div>
  </div>

  <script>
    // ================== DATA ==================
    // โครงสร้าง: name, category, desc, options[{flag,meaning}], examples[{cmd,note}]
    const COMMANDS = [
      // ---------- ไฟล์และไดเรกทอรี ----------
      {
        name: "ls",
        category: "ไฟล์และไดเรกทอรี",
        desc: "แสดงรายการไฟล์/โฟลเดอร์",
        options: [
          {flag:"-l", meaning:"แสดงแบบยาว (สิทธิ์, ขนาด, เวลา)"},
          {flag:"-a", meaning:"รวมไฟล์ซ่อนไว้ (ขึ้นต้นด้วย .)"},
          {flag:"-h", meaning:"ขนาดอ่านง่าย (KB/MB) — ใช้คู่กับ -l"},
          {flag:"-S", meaning:"เรียงตามขนาด"},
          {flag:"-t", meaning:"เรียงตามเวลาแก้ไขล่าสุด"}
        ],
        examples: [
          {cmd:"ls -lah", note:"รายการแบบยาว + ซ่อนไฟล์ + ขนาดอ่านง่าย"},
          {cmd:"ls -lt", note:"รายการเรียงตามเวลาล่าสุดก่อน"}
        ]
      },
      {
        name: "cd / pwd",
        category: "ไฟล์และไดเรกทอรี",
        desc: "เปลี่ยนไดเรกทอรี / แสดงไดเรกทอรีปัจจุบัน",
        options: [
          {flag:"cd -", meaning:"ย้อนกลับไปยังโฟลเดอร์ก่อนหน้า"},
          {flag:"cd ..", meaning:"ขึ้นไป 1 ระดับ"},
          {flag:"pwd", meaning:"พาธปัจจุบัน"}
        ],
        examples: [
          {cmd:"cd /etc && pwd", note:"เข้า /etc แล้วแสดงพาธ"}
        ]
      },
      {
        name: "mkdir / rm / cp / mv / touch",
        category: "ไฟล์และไดเรกทอรี",
        desc: "สร้าง/ลบ/คัดลอก/ย้ายไฟล์และโฟลเดอร์",
        options: [
          {flag:"mkdir -p", meaning:"สร้างซ้อนหลายชั้น (ถ้ามีอยู่แล้วไม่ error)"},
          {flag:"rm -r", meaning:"ลบแบบไดเรกทอรียกชุด"},
          {flag:"rm -f", meaning:"บังคับลบ ไม่ถาม"},
          {flag:"cp -r", meaning:"คัดลอกทั้งโฟลเดอร์ (recursive)"},
          {flag:"mv -i", meaning:"ถามก่อนทับไฟล์"}
        ],
        examples: [
          {cmd:"mkdir -p project/src", note:"สร้างหลายชั้น"},
          {cmd:"cp -r src backup_src", note:"คัดลอกทั้งโฟลเดอร์"},
          {cmd:"mv -i a.txt b.txt", note:"ถามก่อนย้าย/ทับ"},
          {cmd:"rm -rf build/", note:"ลบไดเรกทอรียกชุด (ระวัง!)"},
          {cmd:"touch notes.txt", note:"สร้างไฟล์เปล่า/อัปเดตเวลา"}
        ]
      },
      {
        name: "cat / less / head / tail",
        category: "ไฟล์และไดเรกทอรี",
        desc: "อ่านไฟล์",
        options: [
          {flag:"cat -n", meaning:"ใส่เลขบรรทัดให้ทุกบรรทัด"},
          {flag:"cat -b", meaning:"ใส่เลขให้เฉพาะบรรทัดที่ไม่ว่าง"},
          {flag:"cat -A", meaning:"โชว์อักขระพิเศษ/แท็บ/จบบรรทัด"},
          {flag:"head -n N", meaning:"N บรรทัดแรกของไฟล์"},
          {flag:"tail -n N | -f", meaning:"N บรรทัดท้าย / ติดตามต่อเนื่อง"}
        ],
        examples: [
          {cmd:"cat -n file.txt", note:"ใส่เลขบรรทัดทุกบรรทัด"},
          {cmd:"less -N file.txt", note:"เปิดอ่านแบบเลื่อนพร้อมเลขบรรทัด"},
          {cmd:"tail -f app.log", note:"ติดตาม log แบบสดๆ"}
        ]
      },
      {
        name: "chmod / chown",
        category: "ไฟล์และไดเรกทอรี",
        desc: "กำหนดสิทธิ์และเจ้าของไฟล์",
        options: [
          {flag:"chmod +x file", meaning:"ทำให้ไฟล์รันได้ (execute)"},
          {flag:"chmod 644 file", meaning:"สิทธิ์แบบเลข (rw-r--r--)"},
          {flag:"chmod -R", meaning:"ทำซ้ำทั้งโฟลเดอร์"},
          {flag:"chown user:group file", meaning:"เปลี่ยนเจ้าของ/กลุ่ม"},
          {flag:"chown -R", meaning:"ทำซ้ำทั้งโฟลเดอร์"}
        ],
        examples: [
          {cmd:"chmod -R 755 /var/www", note:"สิทธิ์อ่าน-รันสำหรับผู้อื่น"},
          {cmd:"chown -R www-data:www-data /var/www", note:"เปลี่ยนเจ้าของเว็บ"}
        ]
      },

      // ---------- ค้นหาและจัดการข้อความ ----------
      {
        name: "grep",
        category: "ค้นหาและจัดการข้อความ",
        desc: "ค้นหา pattern ในไฟล์/สตรีม",
        options: [
          {flag:"-r", meaning:"ค้นหาย้อนลึกโฟลเดอร์"},
          {flag:"-i", meaning:"ไม่สนใจตัวพิมพ์เล็ก/ใหญ่"},
          {flag:"-n", meaning:"แสดงเลขบรรทัด"},
          {flag:"-E", meaning:"ใช้ Extended regex (egrep)"},
          {flag:"-v", meaning:"กลับเงื่อนไข (ไม่ตรง pattern)"},
          {flag:"-A/-B/-C N", meaning:"แสดงบรรทัดรอบๆ N บรรทัด หลัง/ก่อน/รอบ"}
        ],
        examples: [
          {cmd:"grep -rin \"error\" logs/", note:"หา error ในไดเรกทอรี logs ทั้งหมด"},
          {cmd:"dmesg | grep -i usb", note:"กรองบันทึกระบบเฉพาะที่มี usb"}
        ]
      },
      {
        name: "find",
        category: "ค้นหาและจัดการข้อความ",
        desc: "ค้นหาไฟล์ตามเงื่อนไข",
        options: [
          {flag:"-name PATTERN", meaning:"เช่น '*.log'"},
          {flag:"-type f/d", meaning:"ไฟล์/โฟลเดอร์"},
          {flag:"-maxdepth N", meaning:"ลึกไม่เกิน N"},
          {flag:"-mtime +/-N", meaning:"แก้ไขภายใน/เกินกว่า N วัน"},
          {flag:"-size +100M", meaning:"ขนาดเกิน 100MB"},
          {flag:"-exec CMD {} \\;", meaning:"สั่งคำสั่งกับผลลัพธ์แต่ละไฟล์"}
        ],
        examples: [
          {cmd:"find . -type f -name \"*.log\" -mtime -7", note:"หา log ภายใน 7 วัน"},
          {cmd:"find . -type f -name \"*.tmp\" -exec rm -f {} \\;", note:"ลบไฟล์ .tmp ทั้งหมด"}
        ]
      },
      {
        name: "sed / awk / sort / uniq / cut / xargs",
        category: "ค้นหาและจัดการข้อความ",
        desc: "เครื่องมือจัดข้อความและข้อมูลตารางแบบ CLI",
        options: [
          {flag:"sed -n '1,10p'", meaning:"พิมพ์บรรทัด 1-10"},
          {flag:"sed -i 's/เก่า/ใหม่/g' file", meaning:"แก้ไขในไฟล์ (in-place)"},
          {flag:"awk -F, '{print $1,$3}'", meaning:"เลือกคอลัมน์ 1 และ 3 คั่นด้วย ,"},
          {flag:"sort -n/-r", meaning:"เรียงตัวเลข / ย้อนกลับ"},
          {flag:"uniq -c/-d", meaning:"นับซ้ำ / แสดงเฉพาะที่ซ้ำ"},
          {flag:"cut -d',' -f2", meaning:"ตัดคอลัมน์ด้วยตัวคั่น"},
          {flag:"xargs -0/-n/-I{}", meaning:"แปลงบรรทัดเป็นอาร์กิวเมนต์คำสั่ง"}
        ],
        examples: [
          {cmd:"cat data.csv | cut -d, -f2 | sort | uniq -c | sort -nr", note:"นับค่าซ้ำคอลัมน์ที่ 2"},
          {cmd:"rg -n \"TODO\" -g '!node_modules' | cut -d: -f1 | sort -u", note:"(ถ้ามี ripgrep) ไฟล์ที่มี TODO"}
        ]
      },

      // ---------- บีบอัด/แตกไฟล์ ----------
      {
        name: "tar / gzip / zip",
        category: "บีบอัด/แตกไฟล์",
        desc: "รวมไฟล์/บีบอัดและแตกไฟล์",
        options: [
          {flag:"tar -czf file.tar.gz DIR", meaning:"บีบอัดเป็น .tar.gz"},
          {flag:"tar -xzf file.tar.gz", meaning:"แตกไฟล์ .tar.gz"},
          {flag:"tar -tf file.tar.gz", meaning:"ดูรายการไฟล์"},
          {flag:"gzip -k file", meaning:"บีบอัดแต่เก็บไฟล์เดิม (-k)"},
          {flag:"zip -r file.zip DIR", meaning:"zip ทั้งโฟลเดอร์"}
        ],
        examples: [
          {cmd:"tar -czf backup_$(date +%F).tar.gz /var/www", note:"ทำแบ็กอัปเว็บ"},
          {cmd:"unzip file.zip -d dest/", note:"แตก zip ไปโฟลเดอร์ปลายทาง"}
        ]
      },

      // ---------- เน็ตเวิร์ก ----------
      {
        name: "curl / wget / ping / ssh / scp / rsync",
        category: "เน็ตเวิร์ก",
        desc: "คำสั่งเน็ตพื้นฐาน",
        options: [
          {flag:"curl -I/-L/-O/-d/-H/-X", meaning:"ส่วนหัว/ตามรีไดเรกต์/โหลดไฟล์/บอดี้/เฮดเดอร์/เมธอด"},
          {flag:"wget -c -O", meaning:"ดาวน์โหลดต่อเนื่อง/-O ระบุชื่อไฟล์"},
          {flag:"ping -c 4 host", meaning:"ping 4 ครั้ง"},
          {flag:"ssh -p 22 user@host", meaning:"ระบุพอร์ต"},
          {flag:"scp -P 22 -r src user@host:dest", meaning:"คัดลอกผ่าน SSH"},
          {flag:"rsync -avz --progress src dest", meaning:"ซิงก์พร้อมแสดงความคืบหน้า"}
        ],
        examples: [
          {cmd:"curl -s https://ifconfig.me", note:"ดู IP ภายนอก"},
          {cmd:"rsync -avz --progress ./dist/ user@server:/var/www/app/", note:"ดีพลอยไฟล์ขึ้นเซิร์ฟเวอร์"}
        ]
      },
      {
        name: "ip / ss",
        category: "เน็ตเวิร์ก",
        desc: "จัดการเครือข่าย/พอร์ต (สมัยใหม่แทน ifconfig/netstat)",
        options: [
          {flag:"ip a", meaning:"ดูที่อยู่ IP ทุกอินเทอร์เฟซ"},
          {flag:"ip r", meaning:"ตารางเส้นทาง"},
          {flag:"ss -tulpen", meaning:"พอร์ต TCP/UDP ที่เปิด พร้อมโปรเซส"}
        ],
        examples: [
          {cmd:"ss -tulpen | grep LISTEN", note:"พอร์ตที่กำลังรอฟัง"}
        ]
      },

      // ---------- ระบบและแพ็กเกจ ----------
      {
        name: "uname / whoami / id / date / cal",
        category: "ระบบและแพ็กเกจ",
        desc: "ข้อมูลระบบพื้นฐาน",
        options: [
          {flag:"uname -a", meaning:"เคอร์เนล/สถาปัตยกรรม"},
          {flag:"whoami", meaning:"ชื่อผู้ใช้ปัจจุบัน"},
          {flag:"id", meaning:"uid/gid/กลุ่ม"},
          {flag:"date '+%F %T'", meaning:"เวลาปัจจุบัน"},
          {flag:"cal", meaning:"ปฏิทินเดือนนี้"}
        ],
        examples: [
          {cmd:"uname -a && whoami && id", note:"ดูภาพรวมเร็วๆ"}
        ]
      },
      {
        name: "df / du / free",
        category: "ระบบและแพ็กเกจ",
        desc: "พื้นที่ดิสก์/หน่วยความจำ",
        options: [
          {flag:"df -h", meaning:"พื้นที่ดิสก์อ่านง่าย"},
          {flag:"du -sh *", meaning:"ขนาดโฟลเดอร์/ไฟล์ในโฟลเดอร์ปัจจุบัน"},
          {flag:"free -h", meaning:"หน่วยความจำอ่านง่าย"}
        ],
        examples: [
          {cmd:"du -sh ./* | sort -h", note:"ดูโฟลเดอร์ไหนกินที่มากสุด"}
        ]
      },
      {
        name: "pacman / yay (Arch)",
        category: "ระบบและแพ็กเกจ",
        desc: "จัดการแพ็กเกจบน Arch",
        options: [
          {flag:"sudo pacman -Syu", meaning:"อัปเดตฐานข้อมูล+อัปเกรดทั้งหมด"},
          {flag:"pacman -Ss name", meaning:"ค้นหาแพ็กเกจ"},
          {flag:"sudo pacman -S pkg", meaning:"ติดตั้ง"},
          {flag:"sudo pacman -Rns pkg", meaning:"ลบพร้อมไฟล์กำกับ"},
          {flag:"yay -S pkg", meaning:"ติดตั้งจาก AUR"},
          {flag:"yay -Yc", meaning:"ล้างพวก dependencies ที่ไม่ใช้"}
        ],
        examples: [
          {cmd:"pacman -Qs curl", note:"แพ็กเกจที่ติดตั้งซึ่งมีคำว่า curl"},
          {cmd:"yay -S jq", note:"ติดตั้ง jq จาก community/AUR"}
        ]
      },

      // ---------- กระบวนการ/โปรเซส ----------
      {
        name: "ps / top / htop / kill / pkill / killall",
        category: "กระบวนการ/โปรเซส",
        desc: "ดูโปรเซสและหยุดโปรเซส",
        options: [
          {flag:"ps aux | grep name", meaning:"ดูโปรเซสที่เข้าคีย์เวิร์ด"},
          {flag:"top / htop", meaning:"มอนิเตอร์สด"},
          {flag:"kill -9 PID", meaning:"บังคับหยุด"},
          {flag:"pkill name", meaning:"หยุดด้วยชื่อ"},
          {flag:"killall name", meaning:"หยุดทุกโปรเซสชื่อนั้น"}
        ],
        examples: [
          {cmd:"ps aux | grep node", note:"หาโปรเซส Node.js"},
          {cmd:"sudo kill -9 12345", note:"ยิงทิ้งแบบบังคับ (ระวัง!)"}
        ]
      },
      {
        name: "systemctl / journalctl",
        category: "กระบวนการ/โปรเซส",
        desc: "จัดการ systemd services และดู log",
        options: [
          {flag:"systemctl status svc", meaning:"สถานะเซอร์วิส"},
          {flag:"systemctl start/stop/restart svc", meaning:"เริ่ม/หยุด/รีสตาร์ท"},
          {flag:"systemctl enable --now svc", meaning:"เปิดอัตโนมัติและเริ่มทันที"},
          {flag:"journalctl -u svc -f", meaning:"ดู log สดของเซอร์วิส"},
          {flag:"journalctl -xe", meaning:"ดู log ล่าสุดแบบรายละเอียด"}
        ],
        examples: [
          {cmd:"sudo systemctl status nginx", note:"ดูสถานะ Nginx"},
          {cmd:"sudo journalctl -u nginx -f", note:"ไลฟ์ log Nginx"}
        ]
      },

      // ---------- เชลล์ & สคริปต์ ----------
      {
        name: "รีไดเรกชัน/ท่อ/ตัวดำเนินการ",
        category: "เชลล์ & สคริปต์",
        desc: "พื้นฐาน Bash เชิงท่อ",
        options: [
          {flag:"> file / >> file", meaning:"เขียนทับ/เขียนต่อท้าย"},
          {flag:"2> err.log / 2>&1", meaning:"ส่ง stderr / รวม stdout+stderr"},
          {flag:"|", meaning:"pipe ส่งผลลัพธ์ไปคำสั่งถัดไป"},
          {flag:"&& / || / ;", meaning:"ทำต่อเมื่อสำเร็จ / เมื่อไม่สำเร็จ / ต่อคิว"},
          {flag:"$(cmd)", meaning:"command substitution"}
        ],
        examples: [
          {cmd:"make 2>build.err | tee build.out", note:"แยก stdout/stderr"},
          {cmd:"grep -r foo . || echo 'not found'", note:"ถ้าไม่เจอให้ echo"}
        ]
      },
      {
        name: "ตัวแปร / alias / ฟังก์ชัน",
        category: "เชลล์ & สคริปต์",
        desc: "ปรับแต่งเชลล์",
        options: [
          {flag:"export VAR=value", meaning:"ตั้งตัวแปรสภาพแวดล้อม"},
          {flag:"alias ll='ls -lah'", meaning:"สร้างชอร์ตคัตคำสั่ง"},
          {flag:"unalias ll", meaning:"ยกเลิก alias"},
          {flag:"function f() { ... }", meaning:"นิยามฟังก์ชัน"}
        ],
        examples: [
          {cmd:"alias gs='git status'", note:"ชอร์ตคัต git status"},
          {cmd:"export PATH=\"$HOME/.local/bin:$PATH\"", note:"เพิ่ม PATH ถาวรใส่ ~/.bashrc"}
        ]
      },
      {
        name: "jobs / bg / fg / nohup / disown",
        category: "เชลล์ & สคริปต์",
        desc: "งานเบื้องหลังและจัดการจอบ",
        options: [
          {flag:"cmd &", meaning:"รันฉากหลัง"},
          {flag:"jobs", meaning:"รายการงาน"},
          {flag:"bg %1 / fg %1", meaning:"ย้ายงานไปเบื้องหลัง/หน้าฉาก"},
          {flag:"nohup cmd &", meaning:"ไม่ตายเมื่อปิดเทอร์มินัล"},
          {flag:"disown", meaning:"ตัด job ออกจากเชลล์"}
        ],
        examples: [
          {cmd:"nohup python server.py &", note:"รันเซิร์ฟเวอร์ค้างหลังบ้าน"}
        ]
      },
      {
        name: "tee / wc / seq / printf",
        category: "เชลล์ & สคริปต์",
        desc: "เครื่องมือจุกจิกที่โคตรมีประโยชน์",
        options: [
          {flag:"tee -a file", meaning:"เขียนไฟล์พร้อมส่งต่อ (append)"},
          {flag:"wc -l/-w/-c", meaning:"นับบรรทัด/คำ/ไบต์"},
          {flag:"seq 1 10", meaning:"สร้างลำดับเลข"},
          {flag:"printf", meaning:"พิมพ์ฟอร์แมต"
          }
        ],
        examples: [
          {cmd:"seq 1 5 | tee list.txt", note:"สร้างตัวเลขแล้วบันทึกด้วย"},
          {cmd:"printf \"%-10s %5d\\n\" name 42", note:"ฟอร์แมตคอลัมน์"}
        ]
      }
    ];

    // ================== RENDER ==================
    function cmdCard(c){
      const optionsRows = (c.options||[]).map(o=>`
        <tr>
          <td class="text-nowrap"><code>${o.flag}</code></td>
          <td>${o.meaning}</td>
        </tr>
      `).join("");

      const examples = (c.examples||[]).map((ex,i)=>`
        <div class="mb-2">
          <div class="d-flex justify-content-between align-items-center">
            <small class="muted">${ex.note||""}</small>
            <button class="btn btn-sm copy-btn" data-cmd="${encodeURIComponent(ex.cmd)}">คัดลอก</button>
          </div>
          <pre class="p-2 rounded"><code>${ex.cmd.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>
        </div>
      `).join("");

      return `
        <div class="col-12 col-lg-6">
          <div class="card h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">${c.name}</h5>
                <span class="badge badge-cat">${c.category}</span>
              </div>
              <p class="card-text">${c.desc||""}</p>

              ${optionsRows ? `
                <div class="table-responsive mb-3">
                  <table class="table table-sm option-table">
                    <thead><tr><th style="width:160px">flag/tag</th><th>ความหมาย</th></tr></thead>
                    <tbody>${optionsRows}</tbody>
                  </table>
                </div>` : ""}

              ${examples}
            </div>
          </div>
        </div>
      `;
    }

    function render(){
      const q = $("#search").val().trim().toLowerCase();
      const cat = $("#category").val();

      const terms = q.split(/\s+/).filter(Boolean);

      const filtered = COMMANDS.filter(c=>{
        const inCat = (cat==="all" || c.category===cat);
        if(!inCat) return false;

        const hay = [
          c.name, c.category, c.desc,
          ...(c.options||[]).map(o=>o.flag+" "+o.meaning),
          ...(c.examples||[]).map(ex=>ex.cmd+" "+(ex.note||""))
        ].join(" ").toLowerCase();

        // match AND
        return terms.every(t => hay.includes(t));
      });

      const html = filtered.map(cmdCard).join("") || `
        <div class="col-12">
          <div class="alert alert-warning">ไม่พบคำสั่งที่ตรงกับคำค้น</div>
        </div>`;
      $("#cmdList").html(html);
    }

    // copy button
    $(document).on("click",".copy-btn", async function(){
      const cmd = decodeURIComponent($(this).data("cmd"));
      try {
        await navigator.clipboard.writeText(cmd);
        $(this).text("คัดลอกแล้ว ✓");
        const btn = this;
        setTimeout(()=>{ btn.textContent="คัดลอก"; }, 1200);
      } catch(e) {
        // fallback
        const ta=document.createElement('textarea');
        ta.value=cmd; document.body.appendChild(ta);
        ta.select(); document.execCommand('copy'); ta.remove();
      }
    });

    // events
    $("#search, #category").on("input change", render);
    $("#btnReset").on("click", ()=>{
      $("#search").val("");
      $("#category").val("all");
      render();
    });
    $(document).on("keydown",(e)=>{ if(e.key==="/"){ e.preventDefault(); $("#search").focus(); } });

    // init
    $(function(){ render(); });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

